<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jamf Threat Intelligence Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f35 100%);
            color: #e8eaed;
            padding: 2rem;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
            letter-spacing: -0.5px;
        }

        .header .subtitle {
            font-size: 1rem;
            color: #8a92a3;
            font-weight: 400;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .panel {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
        }

        .panel-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #8a92a3;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
        }

        .feature-grid {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .feature-row {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .feature-label {
            flex: 0 0 180px;
            font-size: 0.875rem;
            color: #c5c9d0;
        }

        .heatmap-bar {
            flex: 1;
            display: flex;
            gap: 3px;
            height: 32px;
        }

        .heatmap-cell {
            flex: 1;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .heatmap-cell.empty {
            background: rgba(255, 255, 255, 0.03);
        }

        .heatmap-cell.low {
            background: #2563eb;
        }

        .heatmap-cell.medium {
            background: #64748b;
        }

        .heatmap-cell.high {
            background: #dc2626;
        }

        .blocked-stream {
            max-height: 600px;
            overflow: hidden;
            position: relative;
        }

        .blocked-item {
            background: rgba(255, 255, 255, 0.04);
            border-left: 3px solid #dc2626;
            padding: 1rem;
            margin-bottom: 0.75rem;
            border-radius: 8px;
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .blocked-item.phishing {
            border-left-color: #dc2626;
        }

        .blocked-item.malware {
            border-left-color: #ea580c;
        }

        .blocked-item.suspicious {
            border-left-color: #eab308;
        }

        .domain-name {
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 0.875rem;
            color: #fff;
            margin-bottom: 0.5rem;
            word-break: break-all;
        }

        .threat-type {
            display: inline-block;
            font-size: 0.75rem;
            padding: 0.25rem 0.75rem;
            background: rgba(220, 38, 38, 0.2);
            color: #fca5a5;
            border-radius: 12px;
            margin-right: 0.5rem;
        }

        .threat-type.malware {
            background: rgba(234, 88, 12, 0.2);
            color: #fdba74;
        }

        .threat-type.suspicious {
            background: rgba(234, 179, 8, 0.2);
            color: #fde047;
        }

        .timestamp {
            font-size: 0.75rem;
            color: #6b7280;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #fff;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #8a92a3;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.25rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Threat Intelligence Dashboard</h1>
        <div class="subtitle">Real-time domain & URL blocking powered by Jamf Security</div>
    </div>

    <div class="dashboard">
        <div class="panel">
            <div class="panel-title">Feature Signal Matrix</div>
            <div class="feature-grid" id="featureGrid"></div>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalBlocked">0</div>
                    <div class="stat-label">Blocked Today</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="activeThreats">0</div>
                    <div class="stat-label">Active Features</div>
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-title">Live Blocked Domains</div>
            <div class="blocked-stream" id="blockedStream"></div>
        </div>
    </div>

    <script>
        const features = [
            'IP-based domain',
            'Embedded redirect domain',
            'Abnormal entropy',
            'Length anomaly',
            'Hex in FQDN',
            'Suspicious TLD',
            'Typosquatting pattern',
            'Certificate mismatch'
        ];

        const threatTypes = ['phishing', 'malware', 'suspicious'];
        const domains = [
            'login-secure[.]appleid-verify[.]com',
            'cdn-auth[.]icloud-update[.]net',
            'apple-support[.]192-168-1-1[.]xyz',
            'verify-account[.]apple-id-service[.]org',
            'security-alert[.]apple[.]verification[.]app',
            'itunes-billing[.]secure-apple[.]co',
            'app1e-id[.]update-required[.]info',
            'icloud-storage[.]full-notification[.]live',
            'mac0s-update[.]critical-patch[.]download',
            'jamf-admin[.]system-alert[.]cloud'
        ];

        let blockedCount = 0;
        let featureHeatmap = {};

        features.forEach(f => {
            featureHeatmap[f] = Array(10).fill(0);
        });

        function initFeatureGrid() {
            const grid = document.getElementById('featureGrid');
            features.forEach(feature => {
                const row = document.createElement('div');
                row.className = 'feature-row';
                
                const label = document.createElement('div');
                label.className = 'feature-label';
                label.textContent = feature;
                
                const bar = document.createElement('div');
                bar.className = 'heatmap-bar';
                bar.id = `heatmap-${feature}`;
                
                for (let i = 0; i < 10; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'heatmap-cell empty';
                    bar.appendChild(cell);
                }
                
                row.appendChild(label);
                row.appendChild(bar);
                grid.appendChild(row);
            });
        }

        function updateHeatmap(detectedFeatures) {
            detectedFeatures.forEach(feature => {
                if (featureHeatmap[feature]) {
                    featureHeatmap[feature].shift();
                    featureHeatmap[feature].push(Math.random() * 100);
                    
                    const bar = document.getElementById(`heatmap-${feature}`);
                    const cells = bar.children;
                    
                    featureHeatmap[feature].forEach((val, idx) => {
                        if (val === 0) {
                            cells[idx].className = 'heatmap-cell empty';
                        } else if (val < 40) {
                            cells[idx].className = 'heatmap-cell low';
                        } else if (val < 70) {
                            cells[idx].className = 'heatmap-cell medium';
                        } else {
                            cells[idx].className = 'heatmap-cell high';
                        }
                    });
                }
            });
        }

        function addBlockedItem() {
            const stream = document.getElementById('blockedStream');
            const domain = domains[Math.floor(Math.random() * domains.length)];
            const threatType = threatTypes[Math.floor(Math.random() * threatTypes.length)];
            
            const numFeatures = Math.floor(Math.random() * 3) + 1;
            const detectedFeatures = [];
            for (let i = 0; i < numFeatures; i++) {
                const feature = features[Math.floor(Math.random() * features.length)];
                if (!detectedFeatures.includes(feature)) {
                    detectedFeatures.push(feature);
                }
            }
            
            const item = document.createElement('div');
            item.className = `blocked-item ${threatType}`;
            item.innerHTML = `
                <div class="domain-name">â–¶ ${domain}</div>
                <div>
                    <span class="threat-type ${threatType}">${threatType.charAt(0).toUpperCase() + threatType.slice(1)}</span>
                    <span class="timestamp">Blocked just now</span>
                </div>
            `;
            
            stream.insertBefore(item, stream.firstChild);
            
            if (stream.children.length > 8) {
                stream.removeChild(stream.lastChild);
            }
            
            updateHeatmap(detectedFeatures);
            blockedCount++;
            document.getElementById('totalBlocked').textContent = blockedCount.toLocaleString();
            
            const activeFeatures = Object.values(featureHeatmap).filter(arr => 
                arr.some(val => val > 0)
            ).length;
            document.getElementById('activeThreats').textContent = activeFeatures;
        }

        function updateTimestamps() {
            const items = document.querySelectorAll('.blocked-item');
            items.forEach((item, idx) => {
                const timestamp = item.querySelector('.timestamp');
                const seconds = idx * 3 + Math.floor(Math.random() * 3);
                timestamp.textContent = `Blocked ${seconds}s ago`;
            });
        }

        initFeatureGrid();
        
        for (let i = 0; i < 5; i++) {
            setTimeout(() => addBlockedItem(), i * 800);
        }
        
        setInterval(addBlockedItem, 4000);
        setInterval(updateTimestamps, 1000);
    </script>
</body>
</html>
